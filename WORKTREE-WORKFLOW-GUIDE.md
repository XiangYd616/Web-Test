# Git Worktree å·¥ä½œæµç¨‹æŒ‡å—

## ğŸ“‚ å½“å‰ Worktree ç»“æ„

ä½ çš„é¡¹ç›®ä½¿ç”¨äº† **Git Worktree** å¤šå·¥ä½œæ ‘æ¶æ„ï¼Œæœ‰4ä¸ªç‹¬ç«‹çš„å·¥ä½œç›®å½•ï¼š

```
ä¸»ä»“åº“ä½ç½®: D:/myproject/Test-Web

å·¥ä½œæ ‘åˆ†å¸ƒ:
â”œâ”€â”€ Test-Web           (ä¸»å·¥ä½œæ ‘)   â†’ feature/frontend-ui-dev
â”œâ”€â”€ Test-Web-backend   (åç«¯å·¥ä½œæ ‘) â†’ feature/backend-api-dev  â­ å½“å‰ä½ç½®
â”œâ”€â”€ Test-Web-electron  (æ¡Œé¢å·¥ä½œæ ‘) â†’ feature/electron-integration
â””â”€â”€ Test-Web-testing   (æµ‹è¯•å·¥ä½œæ ‘) â†’ test/integration-testing
```

## ğŸ¯ Worktree çš„ä¼˜åŠ¿

âœ… **åŒæ—¶å¼€å‘å¤šä¸ªåŠŸèƒ½**ï¼šä¸åŒç›®å½•å¯¹åº”ä¸åŒåˆ†æ”¯ï¼Œæ— éœ€é¢‘ç¹åˆ‡æ¢  
âœ… **äº’ä¸å¹²æ‰°**ï¼šå„å·¥ä½œæ ‘ç‹¬ç«‹ï¼Œä¿®æ”¹ä¸ä¼šå†²çª  
âœ… **å…±äº«Gitå†å²**ï¼šæ‰€æœ‰å·¥ä½œæ ‘å…±äº«åŒä¸€ä¸ª `.git` ä»“åº“  
âœ… **æ–¹ä¾¿æµ‹è¯•**ï¼šå¯ä»¥åŒæ—¶è¿è¡Œå‰ç«¯ã€åç«¯ã€æµ‹è¯•ç¯å¢ƒ

## ğŸ“Š å½“å‰æäº¤å†å²

```
* 99b8a3f (feature/backend-api-dev) â† ä½ åœ¨è¿™é‡Œ
|         docs: æ·»åŠ è·¯ç”±é‡æ„åç»­å¾…åŠäº‹é¡¹æ¸…å•(Issues)
|
* 64f3633 docs: æ·»åŠ é¡¹ç›®å®Œæ•´å·¥ä½œæ€»ç»“æŠ¥å‘Š
|
* 6503768 refactor(routes): é‡æ„è·¯ç”±æ¶æ„ï¼Œç§»é™¤/apiå‰ç¼€
|
* 091e2fa (feature/frontend-ui-dev, feature/electron-integration, test/integration-testing)
|         feat: æ·»åŠ Git Worktreeå¤šå·¥ä½œæ ‘æ”¯æŒå’Œæ–‡æ¡£
|
* 10aa299 (main) â† ä¸»åˆ†æ”¯
          fix: ä¿®å¤95ä¸ªTypeScripté”™è¯¯
```

## ğŸ”„ æ¥ä¸‹æ¥åº”è¯¥åšä»€ä¹ˆï¼Ÿ

### æ–¹æ¡ˆ A: åˆå¹¶åˆ°ä¸»åˆ†æ”¯ (æ¨è)

å¦‚æœè·¯ç”±é‡æ„å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡ï¼Œå°† `feature/backend-api-dev` åˆå¹¶åˆ° `main`ï¼š

```bash
# 1. ç¡®ä¿å½“å‰å·¥ä½œå·²æäº¤ï¼ˆå·²å®Œæˆ âœ…ï¼‰
git status

# 2. åˆ‡æ¢åˆ°ä¸»å·¥ä½œæ ‘ï¼ˆTest-Webï¼‰
cd D:/myproject/Test-Web

# 3. æ£€æŸ¥ä¸»å·¥ä½œæ ‘çš„åˆ†æ”¯
git status

# 4. åˆ‡æ¢åˆ° main åˆ†æ”¯
git checkout main

# 5. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœæœ‰è¿œç¨‹ä»“åº“ï¼‰
git pull origin main

# 6. åˆå¹¶åç«¯å¼€å‘åˆ†æ”¯
git merge feature/backend-api-dev

# 7. è§£å†³å¯èƒ½çš„å†²çªï¼ˆå¦‚æœæœ‰ï¼‰

# 8. æ¨é€åˆ°è¿œç¨‹ï¼ˆå¦‚æœéœ€è¦ï¼‰
git push origin main

# 9. å›åˆ°åç«¯å·¥ä½œæ ‘ç»§ç»­å¼€å‘
cd D:/myproject/Test-Web-backend
```

### æ–¹æ¡ˆ B: æ¨é€åˆ†æ”¯åˆ°è¿œç¨‹ï¼ˆåä½œå¼€å‘ï¼‰

å¦‚æœéœ€è¦å›¢é˜Ÿå®¡æŸ¥æˆ–åˆ›å»º Pull Requestï¼š

```bash
# åœ¨å½“å‰ä½ç½®ï¼ˆTest-Web-backendï¼‰
git push origin feature/backend-api-dev

# ç„¶ååœ¨ GitHub/GitLab åˆ›å»º Pull Request
# feature/backend-api-dev â†’ main
```

### æ–¹æ¡ˆ C: ç»§ç»­åœ¨å½“å‰åˆ†æ”¯å¼€å‘

å¦‚æœè¿˜æœ‰åç»­å·¥ä½œè¦åšï¼š

```bash
# ç›´æ¥ç»§ç»­å¼€å‘
# æ‰€æœ‰ä¿®æ”¹éƒ½ä¼šåœ¨ feature/backend-api-dev åˆ†æ”¯
# ç­‰æ‰€æœ‰å·¥ä½œå®Œæˆåå†åˆå¹¶
```

## ğŸš€ å®Œæ•´åˆå¹¶æµç¨‹ï¼ˆå»ºè®®æ‰§è¡Œï¼‰

### ç¬¬1æ­¥ï¼šéªŒè¯åç«¯åˆ†æ”¯çŠ¶æ€

```bash
# åœ¨ Test-Web-backend ç›®å½•
cd D:/myproject/Test-Web-backend

# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status
git log --oneline -5

# ç¡®è®¤æ‰€æœ‰æ›´æ”¹å·²æäº¤ âœ…
```

### ç¬¬2æ­¥ï¼šåˆ‡æ¢åˆ°ä¸»å·¥ä½œæ ‘

```bash
cd D:/myproject/Test-Web
```

### ç¬¬3æ­¥ï¼šå‡†å¤‡åˆå¹¶

```bash
# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git status

# å¦‚æœä¸åœ¨ mainï¼Œåˆ‡æ¢åˆ° main
git checkout main

# æŸ¥çœ‹å³å°†åˆå¹¶çš„å·®å¼‚
git log main..feature/backend-api-dev --oneline

# é¢„è§ˆä¼šåˆå¹¶å“ªäº›æ–‡ä»¶
git diff main...feature/backend-api-dev --stat
```

### ç¬¬4æ­¥ï¼šæ‰§è¡Œåˆå¹¶

```bash
# åˆå¹¶åç«¯åˆ†æ”¯ï¼ˆå»ºè®®ä½¿ç”¨ --no-ff ä¿ç•™åˆ†æ”¯å†å²ï¼‰
git merge --no-ff feature/backend-api-dev -m "Merge: åç«¯è·¯ç”±æ¶æ„é‡æ„å®Œæˆ"

# æˆ–è€…ç›´æ¥åˆå¹¶ï¼ˆå¿«è¿›æ¨¡å¼ï¼‰
git merge feature/backend-api-dev
```

### ç¬¬5æ­¥ï¼šéªŒè¯åˆå¹¶ç»“æœ

```bash
# æŸ¥çœ‹åˆå¹¶åçš„å†å²
git log --oneline --graph -10

# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch

# ç¡®è®¤æ–‡ä»¶å®Œæ•´æ€§
ls backend/routes/
```

### ç¬¬6æ­¥ï¼šæ¨é€åˆ°è¿œç¨‹ï¼ˆå¯é€‰ï¼‰

```bash
# å¦‚æœæœ‰è¿œç¨‹ä»“åº“
git push origin main

# ä¹Ÿå¯ä»¥æ¨é€å¼€å‘åˆ†æ”¯ï¼ˆä¿ç•™è®°å½•ï¼‰
git push origin feature/backend-api-dev
```

### ç¬¬7æ­¥ï¼šè¿”å›åç«¯å·¥ä½œæ ‘

```bash
cd D:/myproject/Test-Web-backend

# å¦‚æœéœ€è¦åŸºäºæ–°çš„ main ç»§ç»­å¼€å‘
git checkout main
# æˆ–åˆ›å»ºæ–°çš„åŠŸèƒ½åˆ†æ”¯
git checkout -b feature/next-task
```

## ğŸ” å¸¸ç”¨ Worktree å‘½ä»¤

### æŸ¥çœ‹æ‰€æœ‰å·¥ä½œæ ‘
```bash
git worktree list
```

### åœ¨ä»»ä½•å·¥ä½œæ ‘æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
```bash
git branch -a
```

### åœ¨ä»»ä½•å·¥ä½œæ ‘æŸ¥çœ‹å®Œæ•´å†å²
```bash
git log --oneline --graph --all -20
```

### åœ¨ä»»ä½•å·¥ä½œæ ‘æ¨é€/æ‹‰å–
```bash
# æ‰€æœ‰æ“ä½œéƒ½å½±å“å…±äº«çš„ Git ä»“åº“
git push origin <branch-name>
git pull origin <branch-name>
```

### åˆ é™¤å·¥ä½œæ ‘ï¼ˆå¦‚æœä¸å†éœ€è¦ï¼‰
```bash
# å…ˆåˆ‡æ¢åˆ°ä¸»å·¥ä½œæ ‘
cd D:/myproject/Test-Web

# åˆ é™¤ç‰¹å®šå·¥ä½œæ ‘
git worktree remove Test-Web-backend

# æŸ¥çœ‹å·²åˆ é™¤çš„å·¥ä½œæ ‘
git worktree prune
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ
- **åŠŸèƒ½å¼€å‘**ï¼š`feature/åŠŸèƒ½å`
- **Bugä¿®å¤**ï¼š`fix/é—®é¢˜æè¿°`
- **æµ‹è¯•**ï¼š`test/æµ‹è¯•ç±»å‹`
- **å®éªŒæ€§**ï¼š`experiment/å®éªŒå`

### 2. åˆ†æ”¯ç®¡ç†
```bash
# æ¯ä¸ªå·¥ä½œæ ‘ä¿æŒåœ¨è‡ªå·±çš„åˆ†æ”¯
# å®šæœŸåŒæ­¥ main åˆ†æ”¯çš„æ›´æ–°

# åœ¨ä»»ä½•å·¥ä½œæ ‘
git fetch origin
git merge origin/main  # æˆ– git rebase origin/main
```

### 3. æäº¤é¢‘ç‡
- æ¯ä¸ªå·¥ä½œæ ‘ç‹¬ç«‹æäº¤
- å°æ­¥å¿«è·‘ï¼Œé¢‘ç¹æäº¤
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯

### 4. åˆå¹¶æ—¶æœº
- åŠŸèƒ½å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
- ä¸å›¢é˜Ÿæ²Ÿé€š
- è§£å†³æ‰€æœ‰å†²çª
- æ›´æ–°æ–‡æ¡£

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. åˆ†æ”¯å†²çª
âŒ **ä¸è¦åœ¨å¤šä¸ªå·¥ä½œæ ‘åŒæ—¶ checkout åŒä¸€ä¸ªåˆ†æ”¯**
```bash
# é”™è¯¯ç¤ºä¾‹
cd D:/myproject/Test-Web
git checkout feature/backend-api-dev  # å·²ç»åœ¨ Test-Web-backend ä½¿ç”¨

# ä¼šçœ‹åˆ°é”™è¯¯ï¼š
# fatal: 'feature/backend-api-dev' is already checked out at 'D:/myproject/Test-Web-backend'
```

### 2. ç£ç›˜ç©ºé—´
- æ¯ä¸ªå·¥ä½œæ ‘å ç”¨ç‹¬ç«‹çš„ç£ç›˜ç©ºé—´
- 4ä¸ªå·¥ä½œæ ‘ â‰ˆ 4å€çš„ä»£ç ä½“ç§¯
- å®šæœŸæ¸…ç†ä¸éœ€è¦çš„å·¥ä½œæ ‘

### 3. ä¾èµ–åŒæ­¥
- æ¯ä¸ªå·¥ä½œæ ‘çš„ `node_modules` æ˜¯ç‹¬ç«‹çš„
- æ›´æ–°ä¾èµ–åéœ€è¦åœ¨æ¯ä¸ªå·¥ä½œæ ‘è¿è¡Œ `npm install`

### 4. Git æ“ä½œ
- `git push/pull/fetch` åœ¨ä»»ä½•å·¥ä½œæ ‘éƒ½ç”Ÿæ•ˆ
- æ‰€æœ‰å·¥ä½œæ ‘å…±äº«åŒä¸€ä¸ªè¿œç¨‹ä»“åº“è¿æ¥

## ğŸ¬ å¿«é€Ÿå†³ç­–

### æƒ…å†µ 1ï¼šåç«¯å¼€å‘å·²å®Œæˆï¼Œè¦åˆå¹¶
ğŸ‘‰ æ‰§è¡Œ **æ–¹æ¡ˆ A**ï¼ˆå®Œæ•´åˆå¹¶æµç¨‹ï¼‰

### æƒ…å†µ 2ï¼šéœ€è¦å›¢é˜Ÿ Code Review
ğŸ‘‰ æ‰§è¡Œ **æ–¹æ¡ˆ B**ï¼ˆæ¨é€å¹¶åˆ›å»º PRï¼‰

### æƒ…å†µ 3ï¼šè¿˜æœ‰åç»­ä»»åŠ¡è¦åš
ğŸ‘‰ æ‰§è¡Œ **æ–¹æ¡ˆ C**ï¼ˆç»§ç»­å¼€å‘ï¼‰

### æƒ…å†µ 4ï¼šè¦å¼€å§‹æ–°åŠŸèƒ½
ğŸ‘‰ å…ˆåˆå¹¶å½“å‰å·¥ä½œï¼Œç„¶åï¼š
```bash
cd D:/myproject/Test-Web-backend
git checkout main
git pull origin main
git checkout -b feature/æ–°åŠŸèƒ½å
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä¸ç¡®å®šå½“å‰åº”è¯¥åšä»€ä¹ˆï¼Œè¿è¡Œï¼š

```bash
# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# æŸ¥çœ‹æ‰€æœ‰å·¥ä½œæ ‘
git worktree list

# æŸ¥çœ‹åˆ†æ”¯å…³ç³»
git log --oneline --graph --all -15

# æŸ¥çœ‹æœªåˆå¹¶çš„æäº¤
git log main..feature/backend-api-dev --oneline
```

---

## ğŸ¯ å½“å‰å»ºè®®æ“ä½œ

åŸºäºä½ çš„å½“å‰æƒ…å†µï¼š

âœ… åç«¯è·¯ç”±é‡æ„å·²å®Œæˆï¼ˆ3ä¸ªæäº¤ï¼‰  
âœ… æ–‡æ¡£å·²å®Œå–„  
âœ… æ‰€æœ‰æ›´æ”¹å·²æäº¤  

**å»ºè®®ï¼šç«‹å³åˆå¹¶åˆ° main åˆ†æ”¯**

```bash
# 1. åˆ‡æ¢åˆ°ä¸»å·¥ä½œæ ‘
cd D:/myproject/Test-Web

# 2. åˆ‡æ¢åˆ° main åˆ†æ”¯
git checkout main

# 3. åˆå¹¶åç«¯å¼€å‘
git merge --no-ff feature/backend-api-dev -m "Merge: åç«¯è·¯ç”±æ¶æ„é‡æ„å®Œæˆ

- é‡æ„è·¯ç”±æ¶æ„ï¼Œç§»é™¤/apiå‰ç¼€
- æ³¨å†Œ5ä¸ªæ–°è·¯ç”±æ¨¡å—
- æå‡è·¯ç”±åˆ©ç”¨ç‡è‡³32%
- å®Œå–„é¡¹ç›®æ–‡æ¡£å’Œå¾…åŠäº‹é¡¹"

# 4. æ¨é€åˆ°è¿œç¨‹ï¼ˆå¦‚æœæœ‰ï¼‰
git push origin main

# 5. è¿”å›åç«¯ç»§ç»­å¼€å‘
cd D:/myproject/Test-Web-backend
git checkout main
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-06  
**é€‚ç”¨äº**: Git Worktree å¤šå·¥ä½œæ ‘æ¶æ„

