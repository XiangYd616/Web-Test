{
  "timestamp": "2025-09-20T08:28:19.296Z",
  "tests": [
    {
      "name": "计数器指标",
      "status": "FAILED",
      "error": "计数器值不正确: 13"
    },
    {
      "name": "仪表盘指标",
      "status": "PASSED",
      "result": {
        "gaugeValue": 42.5
      }
    },
    {
      "name": "定时器指标",
      "status": "PASSED",
      "result": {
        "avgTime": 200,
        "maxTime": 300
      }
    },
    {
      "name": "百分位数计算",
      "status": "PASSED",
      "result": {
        "p50": 60,
        "p95": 100
      }
    },
    {
      "name": "时间窗口过滤",
      "status": "FAILED",
      "error": "时间窗口过滤不正确: 25"
    },
    {
      "name": "服务初始化",
      "status": "PASSED",
      "result": {
        "initialized": true
      }
    },
    {
      "name": "服务注册",
      "status": "PASSED",
      "result": {
        "registered": true,
        "instanceCount": 1
      }
    },
    {
      "name": "自定义指标记录",
      "status": "PASSED",
      "result": {
        "counter": 5,
        "gauge": 75.5,
        "timer": 150
      }
    },
    {
      "name": "系统健康检查",
      "status": "PASSED",
      "result": {
        "status": "healthy",
        "servicesTotal": 1
      }
    },
    {
      "name": "服务调用记录",
      "status": "PASSED",
      "result": {
        "invocations": 3,
        "avgResponseTime": 216.66666666666666,
        "errors": 1
      }
    },
    {
      "name": "服务指标获取",
      "status": "PASSED",
      "result": {
        "invocations": 6,
        "avgResponseTime": 216.66666666666666,
        "p95ResponseTime": 300,
        "errorCount": 1
      }
    },
    {
      "name": "计时器功能",
      "status": "PASSED",
      "result": {
        "duration": 61
      }
    },
    {
      "name": "业务指标记录",
      "status": "PASSED",
      "result": {
        "successRate": 95.5
      }
    },
    {
      "name": "告警规则添加",
      "status": "PASSED",
      "result": {
        "ruleName": "test_high_response_time",
        "threshold": 1000
      }
    },
    {
      "name": "告警监听器",
      "status": "PASSED",
      "result": {
        "alertReceived": true
      }
    },
    {
      "name": "告警历史记录",
      "status": "PASSED",
      "result": {
        "historyBefore": 1,
        "historyAfter": 2
      }
    },
    {
      "name": "活跃告警检测",
      "status": "PASSED",
      "result": {
        "activeAlertsCount": 3
      }
    },
    {
      "name": "仪表板数据结构",
      "status": "PASSED",
      "result": {
        "hasTimestamp": true,
        "metricsCategories": 6,
        "servicesCount": 1
      }
    },
    {
      "name": "指标分类数据",
      "status": "PASSED",
      "result": {
        "performanceMetricsCount": 3,
        "businessMetricsCount": 3
      }
    },
    {
      "name": "指标概要数据",
      "status": "PASSED",
      "result": {
        "totalMetrics": 16,
        "hasServiceMetrics": true
      }
    },
    {
      "name": "数据导出功能",
      "status": "PASSED",
      "result": {
        "hasRequiredFields": true,
        "jsonLength": 10061
      }
    },
    {
      "name": "完整监控流程",
      "status": "PASSED",
      "result": {
        "servicesRegistered": 2,
        "dashboardGenerated": true
      }
    },
    {
      "name": "实时监控功能",
      "status": "PASSED",
      "result": {
        "beforeMetrics": 1.9682539682539681,
        "afterMetrics": 1.9692307692307693,
        "realTimeWorking": true
      }
    },
    {
      "name": "系统指标收集",
      "status": "FAILED",
      "error": "内存使用指标未收集"
    }
  ],
  "summary": {
    "total": 24,
    "passed": 21,
    "failed": 3
  },
  "conclusion": {
    "successRate": 88,
    "status": "SOME_FAILED",
    "recommendations": [
      "需要修复失败的测试后再部署",
      "建议定期检查监控系统的性能影响",
      "建议根据实际负载调整指标收集频率",
      "建议建立监控数据的备份和归档策略"
    ]
  }
}