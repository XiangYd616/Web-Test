# ğŸªŸ çª—å£2 - åç«¯APIå¼€å‘ç¯å¢ƒ

## ğŸ“ å½“å‰ä½ç½®
- **å·¥ä½œç›®å½•**: `D:\myproject\Test-Web-backend`
- **Git åˆ†æ”¯**: `feature/backend-api-dev`
- **ä¸»è¦èŒè´£**: åç«¯APIå¼€å‘ã€æ•°æ®åº“æ“ä½œã€ä¸šåŠ¡é€»è¾‘

## ğŸ¯ å·¥ä½œç›®æ ‡
ä½œä¸º**çª—å£2 - åç«¯APIå¼€å‘çª—å£**ï¼Œä¸“æ³¨äºï¼š
1. åç«¯APIç«¯ç‚¹å¼€å‘
2. æ•°æ®åº“Schemaå’Œè¿ç§»
3. ä¸šåŠ¡é€»è¾‘å®ç°
4. WebSocketæœåŠ¡
5. ä¸­é—´ä»¶å’Œè®¤è¯

## ğŸš€ å¿«é€Ÿå¯åŠ¨
```bash
# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3001ï¼‰
npm run backend:dev

# æˆ–æ ‡å‡†å¯åŠ¨
npm run backend
```

## ğŸ“‚ é¡¹ç›®ç»“æ„
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ routes/         # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ app.js          # åº”ç”¨å…¥å£
â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â””â”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤
```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run backend:dev

# æ ‡å‡†å¯åŠ¨
npm run backend

# æŸ¥çœ‹æ—¥å¿—
npm run backend:logs
```

### æ•°æ®åº“å‘½ä»¤
```bash
# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
npm run db:status

# æ‰§è¡Œè¿ç§»
npm run db:migrate

# åˆ›å»ºè¿ç§»
npm run db:create-migration

# å›æ»šè¿ç§»
npm run db:rollback

# å¤‡ä»½æ•°æ®åº“
npm run db:backup
```

### æµ‹è¯•å‘½ä»¤
```bash
# è¿è¡Œåç«¯æµ‹è¯•
cd backend
npm test

# ç›‘å¬æ¨¡å¼
npm run test:watch

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## ğŸŒ APIç«¯ç‚¹

### åŸºç¡€URL
- å¼€å‘ç¯å¢ƒ: `http://localhost:3001/api`
- Swaggeræ–‡æ¡£: `http://localhost:3001/api-docs`

### ä¸»è¦æ¨¡å—
- `/api/auth` - è®¤è¯ç›¸å…³
- `/api/users` - ç”¨æˆ·ç®¡ç†
- `/api/tests` - æµ‹è¯•ç®¡ç†
- `/api/stress` - å‹åŠ›æµ‹è¯•
- `/api/seo` - SEOåˆ†æ
- `/api/compatibility` - å…¼å®¹æ€§æµ‹è¯•

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- ä½¿ç”¨ ESM æ¨¡å—è¯­æ³•
- éµå¾ª REST API è§„èŒƒ
- ä½¿ç”¨å¼‚æ­¥/await
- ç»Ÿä¸€é”™è¯¯å¤„ç†

### æäº¤è§„èŒƒ
```bash
git add backend/
git commit -m "feat(api): æ·»åŠ ç”¨æˆ·è®¤è¯API"
git commit -m "fix(db): ä¿®å¤æ•°æ®åº“è¿æ¥é—®é¢˜"
git commit -m "refactor(service): é‡æ„ç”¨æˆ·æœåŠ¡"
```

## ğŸ”— ä¸å…¶ä»–çª—å£çš„å…³ç³»

### çª—å£1 - å‰ç«¯ (D:\myproject\Test-Web)
- å‰ç«¯è°ƒç”¨æœ¬çª—å£æä¾›çš„API
- ç«¯å£: 5174 â†’ 3001

### çª—å£3 - Electron (D:\myproject\Test-Web-electron)
- Electronåº”ç”¨ä½¿ç”¨æœ¬çª—å£çš„API
- éœ€è¦CORSé…ç½®

### çª—å£4 - æµ‹è¯• (D:\myproject\Test-Web-testing)
- è¿è¡ŒAPIé›†æˆæµ‹è¯•
- éªŒè¯åç«¯åŠŸèƒ½

## ğŸ” æ•…éšœæ’æŸ¥

### ç«¯å£è¢«å ç”¨
```bash
# Windows
netstat -ano | findstr :3001
taskkill /PID <PID> /F

# ä½¿ç”¨å…¶ä»–ç«¯å£
cross-env PORT=3002 npm run backend:dev
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLçŠ¶æ€
npm run db:status

# é‡æ–°åˆå§‹åŒ–
npm run db:init
```

### ä¾èµ–é—®é¢˜
```bash
# é‡æ–°å®‰è£…
npm install

# æ¸…ç†ç¼“å­˜
npm cache clean --force
npm install
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

### æœ¬åœ°æ–‡æ¡£
- é¡¹ç›®README: `../README.md`
- APIæ–‡æ¡£: `backend/docs/API.md`
- æ•°æ®åº“Schema: `backend/docs/DATABASE.md`

### Worktreeç›¸å…³
- å·¥ä½œæ ‘åˆ—è¡¨: `git worktree list`
- åˆå¹¶æŒ‡å—: `../.dev/WORKTREE_MERGE_GUIDE.md`
- å¿«é€Ÿå‚è€ƒ: `../.dev/QUICK_START_REFERENCE.md`

## ğŸ’¡ å¼€å‘æç¤º

### çƒ­æ›´æ–°
- ä½¿ç”¨ `nodemon` è‡ªåŠ¨é‡å¯
- ä¿®æ”¹ä»£ç åè‡ªåŠ¨ç”Ÿæ•ˆ
- ç›‘å¬ `backend/src/` ç›®å½•

### è°ƒè¯•
```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
npm run backend:debug

# ä½¿ç”¨ VS Code è°ƒè¯•
# F5 å¯åŠ¨è°ƒè¯•é…ç½®
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹APIæ€§èƒ½
npm run backend:profile

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
npm run backend:memory
```

## ğŸ¯ å½“å‰ä»»åŠ¡å»ºè®®

ä½œä¸ºåç«¯å¼€å‘çª—å£ï¼Œå¯ä»¥ä¸“æ³¨äºï¼š

1. **APIå¼€å‘**
   - åˆ›å»ºæ–°çš„APIç«¯ç‚¹
   - ä¼˜åŒ–ç°æœ‰APIæ€§èƒ½
   - æ·»åŠ APIæ–‡æ¡£

2. **æ•°æ®åº“æ“ä½œ**
   - è®¾è®¡æ•°æ®è¡¨ç»“æ„
   - åˆ›å»ºè¿ç§»è„šæœ¬
   - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

3. **ä¸šåŠ¡é€»è¾‘**
   - å®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
   - æ·»åŠ æ•°æ®éªŒè¯
   - ä¼˜åŒ–ç®—æ³•

4. **æµ‹è¯•**
   - ç¼–å†™å•å…ƒæµ‹è¯•
   - APIé›†æˆæµ‹è¯•
   - æ€§èƒ½æµ‹è¯•

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… å®æ–½JWTè®¤è¯
- âœ… éªŒè¯æ‰€æœ‰è¾“å…¥
- âœ… é˜²æ­¢SQLæ³¨å…¥
- âœ… å®æ–½CORSç­–ç•¥

## ğŸš¦ çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:3001/api/health

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npm run db:ping

# æŸ¥çœ‹æ—¥å¿—
npm run backend:logs
```

---

**æœ€åæ›´æ–°**: 2025-10-06  
**åˆ†æ”¯**: feature/backend-api-dev  
**ç«¯å£**: 3001  
**çŠ¶æ€**: âœ… å¼€å‘å°±ç»ª

**å¼€å§‹å·¥ä½œ**: `npm run backend:dev`

