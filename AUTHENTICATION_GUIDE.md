# ğŸ” è®¤è¯ç³»ç»Ÿç»Ÿä¸€æŒ‡å—

## é—®é¢˜åˆ†æ

ä½ é‡åˆ°çš„401é”™è¯¯æ˜¯å› ä¸ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨äº†ä¸åŒçš„è®¤è¯ç³»ç»Ÿï¼š

### ğŸ”„ å½“å‰å­˜åœ¨çš„ä¸¤å¥—ç³»ç»Ÿ

#### 1. **å®Œæ•´ç‰ˆåç«¯** (`server/app.js` + PostgreSQL)
- **å¯åŠ¨å‘½ä»¤**: `cd server && npm run dev` æˆ– `npm start`
- **ç«¯å£**: 3001
- **æ•°æ®åº“**: PostgreSQL (testweb_prod)
- **ç”¨æˆ·ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œ/ç™»å½•ç³»ç»Ÿ
- **Tokenæ ¼å¼**: `{ token: "...", user: {...} }`
- **è®¤è¯å­—æ®µ**: `identifier` (ç”¨æˆ·åæˆ–é‚®ç®±)

#### 2. **ç®€åŒ–ç‰ˆåç«¯** (`server/simple-start.js` + å†…å­˜å­˜å‚¨)
- **å¯åŠ¨å‘½ä»¤**: `cd server && node simple-start.js`
- **ç«¯å£**: 3001
- **æ•°æ®åº“**: å†…å­˜å­˜å‚¨ (Map)
- **ç”¨æˆ·ç®¡ç†**: é¢„è®¾ç®¡ç†å‘˜è´¦æˆ·
- **Tokenæ ¼å¼**: `{ tokens: { accessToken: "..." }, user: {...} }`
- **è®¤è¯å­—æ®µ**: `identifier` (ç”¨æˆ·åæˆ–é‚®ç®±)

## ğŸ¯ æ¨èè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ç®€åŒ–ç‰ˆåç«¯ï¼ˆå¿«é€Ÿå¼€å‘ï¼‰â­

**é€‚ç”¨åœºæ™¯**: å¿«é€Ÿå¼€å‘ã€æµ‹è¯•ã€æ¼”ç¤º

```bash
# 1. åœæ­¢å½“å‰åç«¯
# æŒ‰ Ctrl+C åœæ­¢æ­£åœ¨è¿è¡Œçš„æœåŠ¡

# 2. å¯åŠ¨ç®€åŒ–ç‰ˆåç«¯
cd server
node simple-start.js
```

**é¢„è®¾ç®¡ç†å‘˜è´¦æˆ·**:
- **è´¦æˆ·1**: `admin@test.com` / `admin123`
- **è´¦æˆ·2**: `admin@testweb.com` / `admin123`
- **ç”¨æˆ·åç™»å½•**: `admin` / `admin123`

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å®Œæ•´ç‰ˆåç«¯ï¼ˆç”Ÿäº§å°±ç»ªï¼‰

**é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒã€å®Œæ•´åŠŸèƒ½æµ‹è¯•

```bash
# 1. ç¡®ä¿PostgreSQLè¿è¡Œ
net start postgresql-x64-14

# 2. æ£€æŸ¥.envé…ç½®
cd server
# ç¡®ä¿.envæ–‡ä»¶åŒ…å«æ­£ç¡®çš„æ•°æ®åº“é…ç½®

# 3. å¯åŠ¨å®Œæ•´ç‰ˆåç«¯
npm run dev
```

## ğŸ”§ ä¿®å¤å‰ç«¯å…¼å®¹æ€§

æˆ‘å·²ç»ä¿®å¤äº†å‰ç«¯ä»£ç ï¼Œä½¿å…¶å…¼å®¹ä¸¤ç§åç«¯ï¼š

### AuthContext.tsx ä¿®å¤
```typescript
// å…¼å®¹ä¸¤ç§tokenæ ¼å¼
if (result.token) {
  localStorage.setItem('auth_token', result.token);
} else if (result.tokens?.accessToken) {
  localStorage.setItem('auth_token', result.tokens.accessToken);
}
```

### DataManagement.tsx ä¿®å¤
```typescript
// å…¼å®¹tokenè·å–
const token = localStorage.getItem('auth_token') || localStorage.getItem('token');
```

## ğŸš€ ç«‹å³è§£å†³401é”™è¯¯

### æ­¥éª¤1: åœæ­¢å½“å‰åç«¯
```bash
# åœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯æŒ‰ Ctrl+C
```

### æ­¥éª¤2: å¯åŠ¨ç®€åŒ–ç‰ˆåç«¯
```bash
cd server
node simple-start.js
```

### æ­¥éª¤3: ä½¿ç”¨é¢„è®¾è´¦æˆ·ç™»å½•
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

æˆ–è€…

- **é‚®ç®±**: `admin@test.com`
- **å¯†ç **: `admin123`

## ğŸ“‹ åç«¯å¯åŠ¨å‘½ä»¤å¯¹æ¯”

| å‘½ä»¤ | åç«¯ç±»å‹ | æ•°æ®åº“ | ç”¨æˆ·ç³»ç»Ÿ | æ¨èåœºæ™¯ |
|------|----------|--------|----------|----------|
| `node simple-start.js` | ç®€åŒ–ç‰ˆ | å†…å­˜ | é¢„è®¾è´¦æˆ· | å¼€å‘/æµ‹è¯• â­ |
| `npm run dev` | å®Œæ•´ç‰ˆ | PostgreSQL | å®Œæ•´æ³¨å†Œ | ç”Ÿäº§ç¯å¢ƒ |
| `npm start` | å®Œæ•´ç‰ˆ | PostgreSQL | å®Œæ•´æ³¨å†Œ | ç”Ÿäº§éƒ¨ç½² |

## ğŸ” å¦‚ä½•ç¡®è®¤åç«¯ç±»å‹

è®¿é—® `http://localhost:3001/api/info` æŸ¥çœ‹å“åº”ï¼š

```json
// ç®€åŒ–ç‰ˆ
{
  "mode": "simplified",
  "environment": "development"
}

// å®Œæ•´ç‰ˆ
{
  "mode": "production",
  "database": "connected"
}
```

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨ `simple-start.js` å¿«é€Ÿå¼€å‘
2. **æµ‹è¯•é˜¶æ®µ**: ä½¿ç”¨å®Œæ•´ç‰ˆåç«¯æµ‹è¯•å®Œæ•´åŠŸèƒ½
3. **ç”Ÿäº§éƒ¨ç½²**: ä½¿ç”¨å®Œæ•´ç‰ˆåç«¯ + PostgreSQL

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### Q: 401 Unauthorized
**A**: æ£€æŸ¥åç«¯ç±»å‹ï¼Œä½¿ç”¨å¯¹åº”çš„é¢„è®¾è´¦æˆ·ç™»å½•

### Q: ç«¯å£å†²çª
**A**: ç¡®ä¿åªè¿è¡Œä¸€ä¸ªåç«¯æœåŠ¡ï¼Œæ£€æŸ¥ç«¯å£3001å ç”¨

### Q: Tokenæ ¼å¼é”™è¯¯
**A**: å‰ç«¯å·²ä¿®å¤å…¼å®¹æ€§ï¼Œé‡æ–°ç™»å½•å³å¯

---

**ç«‹å³è¡ŒåŠ¨**: ä½¿ç”¨ `node simple-start.js` å¯åŠ¨åç«¯ï¼Œç„¶åç”¨ `admin/admin123` ç™»å½•ï¼
