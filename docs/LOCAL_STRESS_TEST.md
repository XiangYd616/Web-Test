# 本地压力测试功能使用指南

## 🚀 功能概述

本地压力测试功能允许用户通过Electron桌面应用进行大规模压力测试，完全突破服务器资源限制。

### ✨ 核心优势

- **无并发限制**: 支持数千甚至数万并发用户
- **无时长限制**: 可进行长时间持续测试
- **本地资源**: 使用用户本地CPU、内存和网络
- **零服务器消耗**: 不占用任何服务器资源
- **真实网络环境**: 使用用户真实IP和网络环境

## 🛠️ 技术架构

### 多进程架构
```
主进程 (Main Process)
├── LocalStressTestEngine (测试引擎)
├── Worker 1 (处理用户 1-250)
├── Worker 2 (处理用户 251-500)
├── Worker 3 (处理用户 501-750)
└── Worker N (处理用户 ...)
```

### 智能资源分配
- 根据CPU核心数自动计算最优Worker数量
- 动态分配用户到不同Worker进程
- 实时监控系统资源使用情况
- 自动调整测试参数以优化性能

## 📋 使用方法

### 1. 环境要求
- 必须使用Electron桌面应用
- 推荐配置：4核CPU，8GB内存
- 稳定的网络连接

### 2. 启用本地测试
1. 打开压力测试页面 (`/stress-test`)
2. 在测试配置中找到"本地压力测试"选项
3. 启用本地测试开关
4. 系统会自动显示推荐配置

### 3. 配置测试参数
```javascript
{
  url: "https://your-target-site.com",
  users: 1000,           // 并发用户数
  duration: 300,         // 测试时长(秒)
  testType: "stress",    // 测试类型
  rampUp: 60,           // 加压时间(秒)
  thinkTime: 2,         // 用户思考时间(秒)
  timeout: 30           // 请求超时(秒)
}
```

### 4. 监控测试进度
- 实时查看请求数量、成功率、响应时间
- 监控系统资源使用情况
- 查看详细的错误日志和警告信息

## 📊 性能对比

| 特性 | Web版本 | 桌面版本 |
|------|---------|----------|
| 最大并发用户 | ~100 | 10,000+ |
| 测试时长 | 受限 | 无限制 |
| 资源来源 | 服务器 | 用户本地 |
| 网络环境 | 服务器IP | 用户真实IP |
| 稳定性 | 受其他用户影响 | 独立稳定 |
| 成本 | 消耗服务器资源 | 零额外成本 |

## 🎯 推荐配置

### 小规模测试 (≤500用户)
```javascript
{
  users: 500,
  duration: 180,
  testType: "load",
  rampUp: 30,
  thinkTime: 1
}
```

### 中等规模测试 (500-2000用户)
```javascript
{
  users: 1000,
  duration: 300,
  testType: "stress",
  rampUp: 60,
  thinkTime: 2
}
```

### 大规模测试 (>2000用户)
```javascript
{
  users: 5000,
  duration: 600,
  testType: "stress",
  rampUp: 120,
  thinkTime: 3
}
```

## 🔧 故障排除

### 常见问题

**Q: 提示"本地压力测试功能不可用"**
A: 请确保使用Electron桌面应用，Web版本不支持此功能。

**Q: 测试启动失败**
A: 检查目标URL是否可访问，确保网络连接正常。

**Q: 系统资源占用过高**
A: 减少并发用户数或增加思考时间，避免系统过载。

**Q: 测试结果不准确**
A: 确保目标服务器能够处理大量请求，检查防火墙设置。

### 性能优化建议

1. **合理设置用户数**: 不要超过系统能力
2. **适当的加压时间**: 避免瞬间冲击
3. **监控系统资源**: 保持CPU和内存使用在合理范围
4. **网络环境**: 确保稳定的网络连接

## 🧪 测试演示

访问 `/local-stress-test-demo` 页面可以体验完整的本地压力测试功能：

1. 配置测试参数
2. 启动测试并观察实时数据
3. 监控系统资源使用情况
4. 查看详细的测试日志

## 🔮 未来扩展

- **分布式测试**: 多台电脑协同测试
- **云端同步**: 测试结果云端备份
- **高级分析**: 更详细的性能分析报告
- **自动化测试**: 定时自动执行测试
- **团队协作**: 测试配置和结果共享

## 📞 技术支持

如果在使用过程中遇到问题，请：

1. 查看浏览器控制台错误信息
2. 检查系统资源使用情况
3. 确认网络连接状态
4. 联系技术支持团队

---

**注意**: 本地压力测试功能仅在Electron桌面应用中可用，请确保下载并使用桌面版本以获得完整功能体验。
