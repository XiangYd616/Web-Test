#!/usr/bin/env node
/**
 * ТЅ╣жЄЈС┐«тцЇу╝ќуаЂжЌ«жбўУёџТюг
 * С┐«тцЇStressTest.tsxТќЄС╗ХСИГуџёСИГТќЄтГЌугду╝ќуаЂжЌ«жбў
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

console.log('­ЪћД ТЅ╣жЄЈу╝ќуаЂС┐«тцЇУёџТюг');
console.log('='.repeat(50));

const filePath = path.join(__dirname, '../frontend/pages/StressTest.tsx');

console.log('\n­ЪЊЂ уЏ«ТаЄТќЄС╗Х:', filePath);

try {
    // У»╗тЈќТќЄС╗ХтєЁт«╣
    let content = fs.readFileSync(filePath, 'utf8');

    console.log('\n­ЪћЇ т╝ђтДІС┐«тцЇу╝ќуаЂжЌ«жбў...');

    // т«џС╣ЅжюђУдЂС┐«тцЇуџёу╝ќуаЂжЌ«жбў
    const fixes = [
        // С┐«тцЇ"ТБђТЪЦ"тГЌугд
        { from: /ТБђ№┐й/g, to: 'ТБђТЪЦ', desc: 'С┐«тцЇ"ТБђТЪЦ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"жўЪ"тГЌугд
        { from: /Тјњ№┐й/g, to: 'ТјњжўЪ', desc: 'С┐«тцЇ"ТјњжўЪ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"тЈќ"тГЌугд
        { from: /Уји№┐й/g, to: 'УјитЈќ', desc: 'С┐«тцЇ"УјитЈќ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"уДњ"тГЌугд
        { from: /уДњ№┐й/g, to: 'уДњ', desc: 'С┐«тцЇ"уДњ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"ТћХ"тГЌугд
        { from: /№┐йТћХ/g, to: 'ТћХ', desc: 'С┐«тцЇ"ТћХ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"Тѕљ"тГЌугд
        { from: /т«ї№┐й/g, to: 'т«їТѕљ', desc: 'С┐«тцЇ"т«їТѕљ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"жЌ┤"тГЌугд
        { from: /ТЌХ№┐й/g, to: 'ТЌХжЌ┤', desc: 'С┐«тцЇ"ТЌХжЌ┤"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"т║д"тГЌугд
        { from: /жЋ┐№┐й/g, to: 'жЋ┐т║д', desc: 'С┐«тцЇ"жЋ┐т║д"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"ТђЂ"тГЌугд
        { from: /уіХ№┐й/g, to: 'уіХТђЂ', desc: 'С┐«тцЇ"уіХТђЂ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"УАї"тГЌугд
        { from: /У┐Џ№┐й/g, to: 'У┐ЏУАї', desc: 'С┐«тцЇ"У┐ЏУАї"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"У»Ћ"тГЌугд
        { from: /ТхІ№┐й/g, to: 'ТхІУ»Ћ', desc: 'С┐«тцЇ"ТхІУ»Ћ"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"тѕ░"тГЌугд
        { from: /УЙЙ№┐й/g, to: 'УЙЙтѕ░', desc: 'С┐«тцЇ"УЙЙтѕ░"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"уће"тГЌугд
        { from: /СИЊ№┐й/g, to: 'СИЊуће', desc: 'С┐«тцЇ"СИЊуће"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"т«╣"тГЌугд
        { from: /тєЁ№┐й/g, to: 'тєЁт«╣', desc: 'С┐«тцЇ"тєЁт«╣"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"Тѕ┐"тГЌугд
        { from: /Тѕ┐№┐й/g, to: 'Тѕ┐жЌ┤', desc: 'С┐«тцЇ"Тѕ┐жЌ┤"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"ТгА"тГЌугд
        { from: /СИђ№┐й/g, to: 'СИђТгА', desc: 'С┐«тцЇ"СИђТгА"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"тюе"тГЌугд
        { from: /№┐йтюе/g, to: 'тюе', desc: 'С┐«тцЇ"тюе"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"СИф"тГЌугд
        { from: /№┐йСИф/g, to: 'СИф', desc: 'С┐«тцЇ"СИф"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"тљј"тГЌугд
        { from: /№┐йтљј/g, to: 'тљј', desc: 'С┐«тцЇ"тљј"тГЌугду╝ќуаЂ' },

        // С┐«тцЇ"Тюђ"тГЌугд
        { from: /№┐йТюђ/g, to: 'Тюђ', desc: 'С┐«тцЇ"Тюђ"тГЌугду╝ќуаЂ' }
    ];

    let fixCount = 0;

    // т║ћућеТЅђТюЅС┐«тцЇ
    fixes.forEach(fix => {
        const matches = content.match(fix.from);
        if (matches) {
            content = content.replace(fix.from, fix.to);
            fixCount += matches.length;
            console.log(`   РюЁ ${fix.desc}: С┐«тцЇС║є ${matches.length} тцё`);
        }
    });

    if (fixCount > 0) {
        // тєЎтЏъТќЄС╗Х
        fs.writeFileSync(filePath, content, 'utf8');
        console.log(`\n­ЪјЅ С┐«тцЇт«їТѕљ! Тђ╗тЁ▒С┐«тцЇС║є ${fixCount} тцёу╝ќуаЂжЌ«жбў`);
    } else {
        console.log('\nРюЁ Т▓АТюЅтЈЉуј░жюђУдЂС┐«тцЇуџёу╝ќуаЂжЌ«жбў');
    }

} catch (error) {
    console.error('\nРЮї С┐«тцЇУ┐ЄуеІСИГтЄ║уј░жћЎУ»»:', error.message);
    process.exit(1);
}

console.log('\n­ЪЊі С┐«тцЇу╗ЪУ«А:');
console.log('   Рђб уЏ«ТаЄТќЄС╗Х: StressTest.tsx');
console.log('   Рђб С┐«тцЇу▒╗тъІ: СИГТќЄтГЌугду╝ќуаЂжЌ«жбў');
console.log('   Рђб С┐«тцЇуіХТђЂ: т«їТѕљ');

console.log('\n­ЪњА т╗║У««:');
console.log('   Рђб У┐љУАї TypeScript ТБђТЪЦжфїУ»ЂС┐«тцЇу╗ЊТъю');
console.log('   Рђб ТхІУ»ЋжАхжЮбтіЪУЃйуА«С┐ЮТГБтИИтиЦСйю');
console.log('   Рђб ТБђТЪЦтЁХС╗ќТќЄС╗ХТў»тљдТюЅу▒╗С╝╝жЌ«жбў');
